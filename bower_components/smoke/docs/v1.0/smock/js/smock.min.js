/*
*	========================================================================
*	smock.min.js
*	========================================================================
*	Copyright (c) Alfredo Barron   2014. All rights reserved
*	Version       1.1
*	Created       24/10/2013
*	Last modified 07/01/2014
*	Email         contacto@alfredobarron.com
*	Web           http://www.alfredobarron.com
*	========================================================================
*/
(function($){$.fn.smockValidateForm=function(){$('.validate-smock').remove();var result=false;var thiss=0;var emailRegex=/^[a-zA-Z0-9_\.\-]+@[a-zA-Z0-9\-]+\.[a-zA-Z0-9\-\.]+$/;var strongPassRegex=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])\w{6,}$/;var numberRegex=/^([0-9])*$/;var alphanumericRegex=/^[a-z0-9]+$/i;$(':input',this).each(function(){var type=this.type;var tag=this.tagName.toLowerCase();var txtrequired=this.title;var required=this.required;var typealt=this.alt;var minlength=$(this).attr('minlength');var maxlength=$(this).attr('maxlength');if(txtrequired===''||txtrequired===undefined){txtrequired='Campo requerido';}
if(required===true&&(type==='text'||tag==='textarea'||type==='password'||type==='email')){if($(this).val()===''){thiss=this;$(this).focus().after('<span class="validate-smock"><span class="glyphicon glyphicon-warning-sign"></span>'+txtrequired+'</span>');result=false;return false;}else{result=true;}}
if(required===true&&tag==='select'){if($(this).val()===''){thiss=this;var select2=$(this).siblings('div');var select2a=select2.children('a');select2a.focus().after('<span class="validate-smock"><span class="glyphicon glyphicon-warning-sign"></span>'+txtrequired+'</span>');result=false;return false;}else{result=true;}}
if(required===true&&type==='radio'||type==='checkbox'){var check=$("input[name='"+this.name+"']:checked").val();if(check===undefined){thiss=this;$(this).focus().after('<span class="validate-smock"><span class="glyphicon glyphicon-warning-sign"></span>'+txtrequired+'</span>');result=false;return false;}else{result=true;}}
if(type==='email'){if($(this).val()!=''&&!emailRegex.test($(this).val())){thiss=this;$(this).focus().after('<span class="validate-smock"><span class="glyphicon glyphicon-warning-sign"></span>Escribe una cuenta de correo valida</span>');result=false;return false;}else{result=true;}}
if(type==='password'&&typealt=='strongPass'){if($(this).val()!=''&&!strongPassRegex.test($(this).val())){thiss=this;$(this).focus().after('<span class="validate-smock"><span class="glyphicon glyphicon-warning-sign"></span>La contraseña debe tener al menos 6 caracteres, un numero y una mayúscula</span>');result=false;return false;}else{result=true;}}
if(typealt==='number'){if($(this).val()!=''&&!numberRegex.test($(this).val())){thiss=this;$(this).focus().after('<span class="validate-smock"><span class="glyphicon glyphicon-warning-sign"></span>Este campo solo admite números</span>');result=false;return false;}else{result=true;}}
if(typealt==='alphanumeric'){if($(this).val()!=''&&!alphanumericRegex.test($(this).val())){thiss=this;$(this).focus().after('<span class="validate-smock"><span class="glyphicon glyphicon-warning-sign"></span>Este campo solo admite números o letras</span>');result=false;return false;}else{result=true;}}
if((typeof(minlength)!=='undefined'||typeof(maxlength)!=='undefined')){if($(this).val()!=''&&minlength===maxlength){if(($(this).val().length!=minlength)&&($(this).val().length!=maxlength)){$(this).focus().after('<span class="validate-smock"><span class="glyphicon glyphicon-warning-sign"></span>El numero de caracteres debe ser igual a <b>'+maxlength+'</b></span>');result=false;return false;}else{result=true;}}else if($(this).val()!=''&&minlength!=maxlength){if($(this).val().length<minlength||$(this).val().length>maxlength){$(this).focus().after('<span class="validate-smock"><span class="glyphicon glyphicon-warning-sign"></span>El numero de caracteres debe ser mayor a <b>'+minlength+'</b> y menor a <b>'+maxlength+'</b></span>');result=false;return false;}else{result=true;}}}});$(thiss).keyup(function(){if($(this).val()!==''){$('.validate-smock').fadeOut('fast');return false;}});$(thiss).change(function(){if($(this).val()!==''){$('.validate-smock').fadeOut('fast');return false;}});return result;}
$.smockValidateEqualPass=function(password,repassword){$('.validate-smock').remove();var result=false;var strongPassRegex=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])\w{6,}$/;var txtrequiredPass=$(password).attr('title');if(txtrequiredPass===''||txtrequiredPass===undefined){txtrequiredPass='La contraseña debe tener al menos 6 caracteres, un numero y una mayúscula';}
var txtrequiredRePass=$(repassword).attr('title');if(txtrequiredRePass===''||txtrequiredRePass===undefined){txtrequiredRePass='Las contraseñas no coinciden';}
$(password).keyup(function(){if($(this).val()!==''){$('.validate-smock').fadeOut('fast');return false;}});if($(password).val()===''||!strongPassRegex.test($(password).val())){$(password).focus().after('<span class="validate-smock"><span class="glyphicon glyphicon-warning-sign"></span>'+txtrequiredPass+'</span>');result=false;return false;}else{result=true;}
$(repassword).keyup(function(){if($(this).val()!==''){$('.validate-smock').fadeOut('fast');return false;}});if($(password).val()!==$(repassword).val()){$(repassword).focus().after('<span class="validate-smock"><span class="glyphicon glyphicon-warning-sign"></span>'+txtrequiredRePass+'</span>');result=false;return false;}else{result=true;}
return result;}
$.smockValidateEqualPassVar=function(password,repassword){$('.validate-smock').remove();var result=false;var txtrequiredRePass=$(repassword).attr('title');if(txtrequiredRePass===''||txtrequiredRePass===undefined){txtrequiredRePass='Las contraseñas no coinciden';}
$(repassword).keyup(function(){if($(this).val()!==''){$('.validate-smock').fadeOut('fast');return false;}});if(password!==$(repassword).val()){thiss=this;$(repassword).focus().after('<span class="validate-smock"><span class="glyphicon glyphicon-warning-sign"></span>'+txtrequiredRePass+'</span>');result=false;return false;}else{result=true;}
return result;}
$.fn.smockClearForm=function(options){var settings=$.extend({noClear:''},options);var noClearSinEspacios=settings.noClear.replace(/\s/g,'');var noClear=noClearSinEspacios.split(',');return $(':input',this).each(function(){var type=this.type;var tag=this.tagName.toLowerCase();if(tag=='input'){tag=type;}
if($.inArray(type,noClear)<0&&$.inArray(tag,noClear)<0){switch(type){case'text':case'password':case'email':case'number':case'hidden':this.value='';break;case'checkbox':case'radio':this.checked=false;break;}
switch(tag){case'textarea':this.value='';break;case'select':this.selectedIndex=-1;break;}}});}
$.smockConfirm=function(msj,callback){$('.back-confirmSmock, .confirmSmock').remove();$('body').append('<div class="back-confirmSmock"><div class="panel panel-default confirmSmock"><div class="panel-body"><br>'+msj+'<br><br></div><div class="panel-footer text-right"><a class="btn btn-default btn-sm cancel" href="#" >Cancelar</a> <a class="btn btn-danger btn-sm delete" href="#">Borrar</a></div></div></div>');$('.confirmSmock').animate({top:"-5px",opacity:'1'},200);$('.cancel').click(function(e){e.preventDefault();$('.back-confirmSmock').fadeOut(200,function(){$('.back-confirmSmock').remove();});$('.confirmSmock').animate({top:"-500px",opacity:'1'},200,function(){$('.confirmSmock').remove();});callback(false);});$('.delete').click(function(e){e.preventDefault();$('.back-confirmSmock').fadeOut(200,function(){$('.back-confirmSmock').remove();});$('.confirmSmock').animate({top:"-500px",opacity:'1'},200,function(){$('.confirmSmock').remove();});callback(true);});}
var alertSmockTime=0;$.smockAlert=function(msj,options){var settings=$.extend({type:'',time:5000},options);var type=0;switch(settings.type){case'warning':type='alert-warning';break;case'danger':type='alert-danger';break;case'success':type='alert-success';break;case'info':type='alert-info';break;default:type='';}
$('.alertSmock').remove();clearTimeout(alertSmockTime);$('body').append('<div class="alert alert-dismissable '+type+' alertSmock"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+msj+'</div>');$('.alertSmock').animate({right:"+=370px",opacity:'1'},150);alertSmockTime=setTimeout(function(){$('.alertSmock').animate({right:"-=370",opacity:'0'},150,function(){$('.alertSmock').remove();});},settings.time);}
$.smockFormatCurrency=function(num,prefix){num=Math.round(parseFloat(num)*Math.pow(10,2))/Math.pow(10,2);prefix=prefix||'';num+='';var splitStr=num.split('.');var splitLeft=splitStr[0];var splitRight=splitStr.length>1?'.'+splitStr[1]:'.00';splitRight=splitRight+'00';splitRight=splitRight.substr(0,3);var regx=/(\d+)(\d{3})/;while(regx.test(splitLeft)){splitLeft=splitLeft.replace(regx,'$1'+','+'$2');}
return prefix+splitLeft+splitRight;}
$.smockDateFormat=function(options){var settings=$.extend({date:new Date(),format:'yyyymmdd hhmmss',lang:'es',separatorDate:'-',separatorTime:':'},options);var date=new Date(settings.date);var dd=date.getDate();var mm=date.getMonth()+1;if(settings.lang=='es'){if(settings.format=='yyyyMdd'||settings.format=='yyMdd'||settings.format=='ddMyyyy'|settings.format=='ddMyy'){var monthNames=["Ene","Feb","Mar","Abr","May","Jun","Jul","Agos","Septiembre","Oct","Nov","Dic"];}else{var monthNames=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];}}else{if(settings.format=='yyyyMdd'||settings.format=='yyMdd'||settings.format=='ddMyyyy'|settings.format=='ddMyy'){var monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];}else{var monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];}}
var yyyy=date.getFullYear();var yy=yyyy.toString().substring(2);if(dd<10){dd='0'+dd}
if(mm<10){mm='0'+mm}
var hh=date.getHours();var mi=date.getMinutes();var ss=date.getSeconds();if(mi<10){mi='0'+mi}
if(ss<10){ss='0'+ss}
switch(settings.format){case"yyyymmdd hhmmss":return yyyy+settings.separatorDate+mm+settings.separatorDate+dd+' '+hh+settings.separatorTime+mi+settings.separatorTime+ss;case"yyyymmdd":return yyyy+settings.separatorDate+mm+settings.separatorDate+dd;case"yyyyMMdd":return yyyy+settings.separatorDate+monthNames[date.getMonth()]+settings.separatorDate+dd;case"yyyyMdd":return yyyy+settings.separatorDate+monthNames[date.getMonth()]+settings.separatorDate+dd;case"yymmdd":return yy+settings.separatorDate+mm+settings.separatorDate+dd;case"yyMMdd":return yy+settings.separatorDate+monthNames[date.getMonth()]+settings.separatorDate+dd;case"yyMdd":return yy+settings.separatorDate+monthNames[date.getMonth()]+settings.separatorDate+dd;case"ddmmyyyy":return dd+settings.separatorDate+mm+settings.separatorDate+yyyy;case"ddMMyyyy":return dd+settings.separatorDate+monthNames[date.getMonth()]+settings.separatorDate+yyyy;case"ddMyyyy":return dd+settings.separatorDate+monthNames[date.getMonth()]+settings.separatorDate+yyyy;case"ddmmyy":return dd+settings.separatorDate+mm+settings.separatorDate+yy;case"ddMMyy":return dd+settings.separatorDate+monthNames[date.getMonth()]+settings.separatorDate+yy;case"ddMyy":return dd+settings.separatorDate+monthNames[date.getMonth()]+settings.separatorDate+yy;}}
$.smockDateDiff=function(options){var settings=$.extend({fromDate:'01/01/2013',toDate:'12/31/2014',interval:'years'},options);var second=1000,minute=second*60,hour=minute*60,day=hour*24,week=day*7;var fromDate=new Date(settings.fromDate);var toDate=new Date(settings.toDate);var timediff=toDate-fromDate;if(isNaN(timediff))return NaN;switch(settings.interval){case"years":return toDate.getFullYear()-fromDate.getFullYear();case"months":return((toDate.getFullYear()*12+toDate.getMonth())-(fromDate.getFullYear()*12+fromDate.getMonth()));case"weeks":return Math.floor(timediff/week);case"days":return Math.floor(timediff/day);case"hours":return Math.floor(timediff/hour);case"minutes":return Math.floor(timediff/minute);case"seconds":return Math.floor(timediff/second);default:return undefined;}}
$.smockGetURL=function(folder){var protocol=$(location).attr('protocol');var hostname=$(location).attr('hostname');var pathname=$(location).attr('pathname');pathname=pathname.split('/');var last=pathname.pop();if(last!=''){file=last.split('.');if(file.length<2){pathname.push(last);}}
pathname=pathname.slice(0,folder+1);pathname=pathname.join('/');var url=protocol+'//'+hostname+pathname;return url;}
$.smockScrolling=function(options){var settings=$.extend({speed:1000},options);$('a[href*=#]:not([href=#])').click(function(){if(location.pathname.replace(/^\//,'')==this.pathname.replace(/^\//,'')&&location.hostname==this.hostname){var target=$(this.hash);target=target.length?target:$('[name='+this.hash.slice(1)+']');if(target.length){$('html,body').animate({scrollTop:target.offset().top},settings.speed);return false;}}});}})(jQuery);